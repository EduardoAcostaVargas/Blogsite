{% extends "base.html" %}

{% block content %}
    <h2>Blog Posts</h2>
    <div id="blogList">
    {% if blogs %}
        {% for blog in blogs %}
            <div class="blog-post">
                <h2>{{ blog.title }}</h2>
                <p><em>by {{ blog.author }} on {{ blog.created_at.strftime('%B %d, %Y') }}</em></p>
                <p>{{ blog.content }}</p>
                
                <!-- Comments Section -->
                <div class="comments-section">
                    <h3>Comments ({{ blog.comments|length }})</h3>
                    {% if blog.comments %}
                        {% for comment in blog.comments %}
                            <div class="comment">
                                <p class="comment-author">{{ comment.commenter }} â€¢ {{ comment.created_at.strftime('%b %d, %Y at %I:%M %p') }}</p>
                                <p class="comment-text">{{ comment.text }}</p>
                            </div>
                        {% endfor %}
                    {% else %}
                        <p class="no-comments">No comments yet. Be the first to comment!</p>
                    {% endif %}
                    
                    <!-- Add Comment Form -->
                    <form method="POST" action="/addComment/{{ blog.id }}" class="comment-form">
                        <input type="text" name="commenter" placeholder="Your Name" required>
                        <textarea name="comment" rows="3" placeholder="Write a comment..." required></textarea>
                        <input type="submit" value="Post Comment" class="btn-grad">
                    </form>
                </div>
            </div>
        {% endfor %}
    {% else %}
        <p>No blog posts available.</p>
    {% endif %}
    </div>
{% endblock %}